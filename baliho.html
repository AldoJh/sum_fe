<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Detail Lokasi</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
</head>
<body class="bg-gray-100 font-sans">

<!-- Header -->
<header class="bg-gray-800 text-white">
    <div class="container mx-auto flex flex-wrap justify-between items-center py-4 px-6">
        <img src="./Asset/Frame 24.png" alt="Company Logo" class="h-8">
        <nav class="flex space-x-4">
            <div class="relative">
                <button onclick="toggleDropdown()" class="hover:text-gray-400 focus:outline-none px-4 py-2 bg-gray-700 rounded">
                    Layanan â–¼
                </button>
                <div id="dropdown-menu" class="hidden absolute mt-2 bg-white text-gray-800 shadow-lg rounded-lg w-40 z-50">
                    <a href="Layanan.html" class="block px-4 py-2 hover:bg-gray-200">Jasa Advertising</a>
                    <a href="Sewa.html" class="block px-4 py-2 hover:bg-gray-200">Sewa Billboard, Baliho, & Videotron </a>
                </div>
            </div>
            <button onclick="scrollToFooter()" class="hover:text-gray-400 px-4 py-2 bg-gray-700 rounded">Kontak</button>
        </nav>
        <button class="bg-red-500 hover:bg-green-600 text-white py-2 px-4 rounded" onclick="window.location.href='Sewa.html'">
            Kembali
        </button>
    </div>
</header>

<!-- Gambar Kantor -->
<div class="relative">
    <img src="./Asset/foto1.jpg" alt="Foto Kantor" class="w-full h-64 object-cover">
</div>

<!-- Container Detail Lokasi -->
<div class="container mx-auto mt-6 p-6 bg-white shadow-lg rounded-lg flex flex-row items-start space-x-6">
    <!-- Gambar Lokasi di Kiri -->
    <div class="w-1/3">
        <img id="locationImage" src="/sum_fe/Asset/baliho.jpg" class="w-full h-auto rounded-lg shadow-md" alt="Gambar Lokasi">
    </div>

    <!-- Detail Lokasi di Kanan -->
    <div class="w-2/3 space-y-2">
        <h2 id="locationName" class="text-2xl font-bold mb-4"></h2>
        <p id="locationDescription" class="text-gray-700 mb-4"></p>

        <div class="grid grid-cols-2 gap-4">
            <p><strong>Kode Tiang:</strong> <span id="poleCode"></span></p>
            <p><strong>Provinsi:</strong> <span id="locationProvince"></span></p>
            <p><strong>Kabupaten/Kota:</strong> <span id="locationRegency"></span></p>
            <p><strong>Kota:</strong> <span id="locationCity"></span></p>
            <p><strong>Alamat:</strong> <span id="locationStreet"></span></p>
            <p><strong>Ukuran:</strong> <span id="locationSize"></span></p>
            <p><strong>Jenis Tiang:</strong> <span id="locationType"></span></p>
            <p><strong>Jenis Pencahayaan:</strong> <span id="locationLight"></span></p>
            <p><strong>Koordinat:</strong> <span id="locationKoordinat"></span></p>
            <p><strong>Volume Lalu Lintas:</strong> <span id="trafficVolume"></span></p>
            <p><strong>Pemilik Tiang:</strong> <span id="poleOwner"></span></p>
            <p><strong>Status Sewa:</strong> <span id="rentalStatus"></span></p>
            <p><strong>Penyewa:</strong> <span id="renter"></span></p>
            <p><strong>Durasi Sewa:</strong> <span id="rentalDuration"></span></p>
            <p><strong>Latitude:</strong> <span id="locationLatitude"></span></p>
            <p><strong>Longitude:</strong> <span id="locationLongitude"></span></p>
        </div>


        <!-- Tombol Navigasi ke Google Maps -->
        <div class="flex right center mt-4">
            <a id="navigateButton" target="_blank" class="bg-blue-500 text-white px-6 py-2 rounded shadow-md hover:bg-blue-600">
                Navigasi ke Lokasi
            </a>
        </div>
    </div>
</div>

<!-- Peta Lokasi -->
<div class="container mx-auto mt-6 p-4 bg-white shadow-lg rounded-lg max-w-3xl">
    <h3 class="text-xl font-bold mb-2">Peta Lokasi</h3>
    <div id="map" class="w-full h-60 rounded-lg"></div>
</div>

   <!-- Konten Detail -->
<div class="container mx-auto mt-8 p-6 bg-white shadow-lg rounded-lg grid grid-cols-1 md:grid-cols-2 gap-6">
    <!-- Informasi Layanan -->
    <div>
        <h2 class="text-3xl font-bold">Anda tertarik dengan layanan Sewa Billboard / Baliho diatas?</h2>
        <p class="text-gray-700 mt-4">Untuk informasi lebih jelas mengenai Sewa Billboard dan Baliho beserta produksi cetaknya, atau mengenai layanan produksi yang lain, silahkan hubungi kami</p>
        <div class="flex items-center mt-6">
            <i class="fas fa-phone-alt text-green-500 text-3xl"></i>
            <div class="ml-3">
                <p class="font-semibold">Layanan Klien</p>
                <p class="text-lg font-bold">081394930009</p>
                <a href="#" class="text-yellow-500 font-bold">SELENGKAPNYA</a>
            </div>
        </div>
    </div>

   <!-- Form Kontak -->
    <div class="bg-white p-6 shadow-lg rounded-lg">
        <form class="space-y-4">
            <input type="text" placeholder="Nama" class="w-full p-3 border border-gray-300 rounded">
            <input type="email" placeholder="Email" class="w-full p-3 border border-gray-300 rounded">
            <input type="text" placeholder="Judul Pesan" class="w-full p-3 border border-gray-300 rounded">
            <textarea placeholder="Pesan Anda...." class="w-full p-3 border border-gray-300 rounded h-24"></textarea>
            <button type="submit" class="bg-yellow-500 hover:bg-yellow-600 text-white py-3 px-4 rounded w-full text-lg font-bold">
                Kirim Pesan
            </button>
        </form>
    </div>
</div>

<!-- Footer -->
<footer id="footer" class="bg-gray-800 text-white py-6 mt-6">
    <div class="container mx-auto flex flex-wrap justify-between items-center">
        <div class="text-left">
            <h2 class="text-xl font-bold mb-2">Konsul Layanan</h2>
            <p class="mb-4">Hubungi kami untuk informasi lebih lanjut:</p>
            <a href="mailto:info@digitalprinting.com" class="text-blue-400 hover:underline">info@digitalprinting.com</a>
            <p class="mt-2">Telp: 0812-3456-7890</p>
            <p class="mt-2">Alamat: Jl. Contoh No. 123, Kota ABC</p>
        </div>
        <div>
            <img src="./Asset/Frame 24.png" alt="Logo" class="h-12">
        </div>
    </div>
    <div class="container mx-auto text-center mt-4">
        <a href="ProvideBySoematraMediaAdvertising" class="text-gray-400 hover:underline">Provide By Soematra Media Advertising</a>    
    </div>
</footer>
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script>
    // Ambil parameter 'code' dari URL
    const urlParams = new URLSearchParams(window.location.search);
    const code = urlParams.get('code');

    if (code) {
        fetchLocationData(code);
    } else {
        alert('ID Lokasi tidak ditemukan!');
    }

    async function fetchLocationData(id) {
        try {
            // Mengambil data berdasarkan ID dengan axios
            const response = await axios.get(`http://localhost:3000/data/id/${id}`);

            if (response.status === 200) {
                const data = response.data;
                // Menampilkan data ke dalam elemen HTML
                document.getElementById("locationName").textContent = data.nama_tiang;
                document.getElementById("locationDescription").textContent = data.deskripsi;
                document.getElementById("poleCode").textContent = data.kode_tiang;
                document.getElementById("locationProvince").textContent = data.provinsi;
                document.getElementById("locationRegency").textContent = data.kabupaten;
                document.getElementById("locationCity").textContent = data.kota;
                document.getElementById("locationStreet").textContent = data.nama_jalan;
                document.getElementById("locationSize").textContent = data.ukuran;
                document.getElementById("locationType").textContent = data.jenis;
                document.getElementById("locationLight").textContent = data.jenis_lampu;
                document.getElementById("locationLatitude").textContent = data.lat;
                document.getElementById("trafficVolume").textContent = data.jumlah_kendaraan;
                document.getElementById("poleOwner").textContent = data.nama_pemilik_tiang;
                document.getElementById("rentalStatus").textContent = data.status_sewa;
                document.getElementById("renter").textContent = data.nama_penyewa;
                document.getElementById("rentalDuration").textContent = data.lama_sewa;
                document.getElementById("locationLongitude").textContent = data.long;
                document.getElementById("locationKoordinat").textContent = `${data.lat}, ${data.long}`;

                // Menampilkan gambar lokasi
                document.getElementById("locationImage").src = `http://localhost:3000/uploads/${data.gambar}`;

                // Mengupdate link navigasi Google Maps
                const navigateButton = document.getElementById("navigateButton");
                navigateButton.href = `https://www.google.com/maps?q=${data.lat},${data.long}`;
            } else {
                console.error("Gagal mengambil data:", response.status);
            }
        } catch (error) {
            console.error("Terjadi kesalahan saat mengambil data:", error);
        }
    }
</script>

<script src="./Media/script.js"></script>
<script>
    function toggleDropdown() {
        document.getElementById("dropdown-menu").classList.toggle("hidden");
    }
    function scrollToFooter() {
        document.getElementById("footer").scrollIntoView({ behavior: "smooth" });
    }
</script>

</body>
</html>
